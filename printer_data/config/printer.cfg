[include mainsail.cfg]
[include Eddy.cfg]
[include stealthburner_leds.cfg]
#[include print_macro.cfg]
[include print_start.cfg]
[include macros.cfg]
[exclude_object]
#[include KAMP_Settings.cfg]
[include filament.cfg]
#[include adaptive_purge]
#[include PIS.cfg]
[gcode_arcs]
resolution: 0.1
###############################################################################
#Printer Info
###############################################################################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32g0b1xx_1C0029000150414D39343620-if00

[virtual_sdcard]
path: /home/minifreezer/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[printer]
kinematics: corexz
max_velocity: 500
max_accel: 10000
square_corner_velocity: 5

[input_shaper]
#shaper_freq_x: 74.0
#shaper_type_x: ei
#shaper_freq_y: 32
#shaper_type_y: mzv

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[temperature_sensor skr_mini_3_V3]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

################################################################################
#TMC Motor Control
################################################################################

[stepper_x]
step_pin: PB13
dir_pin: !PB12
enable_pin: !PB14
microsteps: 32
rotation_distance: 40
full_steps_per_rotation: 200
endstop_pin: ^!PC0
position_endstop: 216.5
position_min: 0
position_max: 216.5
homing_speed: 125
homing_positive_dir: true

[tmc2209 stepper_x]
uart_pin: PC11
tx_pin: PC10
uart_address: 0
run_current: 1.2
interpolate: False
stealthchop_threshold: 999999

[stepper_y]
step_pin: PB10
dir_pin: !PB2
enable_pin: !PB11
microsteps: 32
rotation_distance: 40
full_steps_per_rotation: 200
endstop_pin: ^!PC1
position_endstop: 235
position_min: 0
position_max: 237
homing_speed: 125
homing_positive_dir: true

[tmc2209 stepper_y]
uart_pin: PC11
tx_pin: PC10
uart_address: 2
run_current: 1.2
interpolate: False
stealthchop_threshold: 999999


[stepper_z]
step_pin: PB0
dir_pin: !PC5
enable_pin: !PB1
microsteps: 32
rotation_distance: 40
full_steps_per_rotation: 200
#endstop_pin: ^PC2
#position_endstop: 0.0
#endstop_pin: probe:z_virtual_endstop
endstop_pin: probe:z_virtual_endstop
position_max: 202
position_min: -3.0
homing_speed: 40
homing_retract_dist: 5.0

[tmc2209 stepper_z]
uart_pin: PC11
tx_pin: PC10
uart_address: 1
run_current: 1.2
interpolate: False
stealthchop_threshold: 999999

#########################################################################
#Extruder and Hot End
#########################################################################

[extruder]
step_pin: PB3
dir_pin: PB4
enable_pin: !PD1
gear_ratio: 50:10
microsteps: 16
rotation_distance: 23.024
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PC8
sensor_type: Generic 3950
sensor_pin: PA0
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
max_extrude_only_distance: 125
max_extrude_cross_section: 5.0
min_temp: 0
max_temp: 320
min_extrude_temp: 170
pressure_advance = 0.04

[tmc2209 extruder]
uart_pin: PC11
tx_pin: PC10
uart_address: 3
run_current: 0.8
interpolate: False
#stealthchop_threshold: 999999

#########################################################################
#Hot Bed
#########################################################################
[heater_bed]
heater_pin: PC9
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC4
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

#########################################################################
#Levelimg and Homing
#########################################################################

[safe_z_home]
home_xy_position: 109,103 # Change coordinates to the center of your print bed
speed: 100
z_hop: 10                 # Move up 10mm
z_hop_speed: 5

[bed_mesh]
speed: 150
horizontal_move_z: 2
mesh_min: 1, 23
mesh_max: 215, 203  #235 #238
probe_count: 10, 10
fade_start: 1
fade_end: 10
fade_target: 0
mesh_pps: 2, 2
algorithm: bicubic
bicubic_tension: 0.2


[bed_screws]
screw1: 30.5, 37
screw2: 30.5, 207
screw3: 204.5, 207
screw4: 204.5, 37

[screws_tilt_adjust]
screw1: 26,20
screw1_name: front left screw
screw2: 194,20
screw2_name: front right screw
screw3: 194,191
screw3_name: rear right screw
screw4: 26,191
screw4_name: rear left screw
horizontal_move_z: 10
speed: 200
screw_thread: CW-M4

########################################################################
#Fan Control
########################################################################

[heater_fan heatbreak_cooling_fan]
pin: PB15
cycle_time: 0.010
hardware_pwm: False
kick_start_time: 0.100
heater: extruder
heater_temp: 50.0

[controller_fan my_controller_fan]
pin: PC7
cycle_time: 0.010
hardware_pwm: False
kick_start_time: 0.100
#stepper: extruder
max_power: 1.0
fan_speed: .50

[fan]
pin: PC6
cycle_time: 0.010
hardware_pwm: False
kick_start_time: 0.100

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
    EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 27.835
#*# pid_ki = 8.068
#*# pid_kd = 24.008
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 64.725
#*# pid_ki = 1.396
#*# pid_kd = 749.999
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.008398, 0.218715, 0.231517, 0.218715, 0.209952, 0.212682, 0.243858, 0.286416, 0.388186, 0.354283
#*# 	  -0.029285, 0.192308, 0.202522, 0.180675, 0.171755, 0.178296, 0.240202, 0.288014, 0.394999, 0.365300
#*# 	  -0.029285, 0.208582, 0.218715, 0.199779, 0.192308, 0.203012, 0.240202, 0.291780, 0.396263, 0.371301
#*# 	  -0.004321, 0.205554, 0.208582, 0.182055, 0.173140, 0.183441, 0.238851, 0.289336, 0.390329, 0.369383
#*# 	  0.055181, 0.274595, 0.273458, 0.242509, 0.225129, 0.225129, 0.262424, 0.312375, 0.404310, 0.381154
#*# 	  0.123802, 0.302665, 0.292904, 0.263761, 0.223768, 0.228809, 0.292904, 0.322049, 0.410206, 0.392861
#*# 	  0.180675, 0.355178, 0.361204, 0.330377, 0.302665, 0.301351, 0.308838, 0.342169, 0.426165, 0.407260
#*# 	  0.241159, 0.416949, 0.427411, 0.382229, 0.342169, 0.322049, 0.355819, 0.391595, 0.479234, 0.455648
#*# 	  0.348877, 0.532207, 0.526638, 0.480258, 0.444478, 0.428656, 0.463475, 0.489206, 0.566566, 0.540947
#*# 	  0.467989, 0.598448, 0.580615, 0.531020, 0.510215, 0.520237, 0.580032, 0.573995, 0.651281, 0.645429
#*# x_count = 10
#*# y_count = 10
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 1.0
#*# max_x = 214.93
#*# min_y = 23.0
#*# max_y = 203.0
#*#
#*# [input_shaper]
#*# shaper_type_x = 2hump_ei
#*# shaper_freq_x = 71.2
#*# shaper_type_y = mzv
#*# shaper_freq_y = 32.0
#*#
#*# [probe_eddy_ng btt_eddy]
#*# calibrated_drive_currents = 15
#*# calibration_version = 5
#*# reg_drive_current = 15
#*# tap_drive_current = 15
#*# calibration_15 = gASVygMAAAAAAAB9lCiMAXaUSwWMBGZ0b2iUjBtudW1weS5wb2x5bm9taWFsLnBvbHlub21pYWyUjApQb2x5bm9taWFslJOUKYGUfZQojARjb2VmlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLCoWUaAyMBWR0eXBllJOUjAJmOJSJiIeUUpQoSwOMATyUTk5OSv////9K/////0sAdJRiiUNQfvCrwS4E9j9J9Zv3brD+P5YMMFJEne0/WQ6GPZjd3j9X/cCiY9zUv1udETGgW+G/bpE8rF8h6z+X0ykLOp7zP/UWXMxDI9W/cgvRE4b54r+UdJRijAZkb21haW6UaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxC7XCN7W7qUPlckO1c775Q+lHSUYowGd2luZG93lGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGKMB19zeW1ib2yUjAF4lIwGc3ltYm9slGgsdWKMCWZ0b2hfaGlnaJRoBSmBlH2UKGgIaAtoDksAhZRoEIeUUpQoSwFLCoWUaBiJQ1B7dUJz6mobQBp0hvrvqwpAYBKdg+WH/j+a8wq/F28JQGDqMPfdBKA/ucLRe3JwIMDikgmpZYLwP8Cwk4LiVClAiwJ/2X3OT7+R9jwSDs8WwJR0lGJoHWgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQR8ty1FrtlD6D3eZL4vqUPpR0lGJoJGgLaA5LAIWUaBCHlFKUKEsBSwKFlGgYiUMQAAAAAAAA8L8AAAAAAADwP5R0lGJoK2gsaC1oLHVijARodG9mlGgFKYGUfZQoaAhoC2gOSwCFlGgQh5RSlChLAUsKhZRoGIlDUMWeN5v94JQ+yDjHj+zvFT5moyL8zUQDvvRswiprGts9oRajv0Cw870alYD9b24APi3hqji35+c9yhAD02HyAL5gHQbvz0bDvSxFkdJOKug9lHSUYmgdaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxCC2rlQtMZVP7wrnpZD7BNAlHSUYmgkaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAAAAAAADwvwAAAAAAAPA/lHSUYmgraCxoLWgsdWKMB2hfcmFuZ2WUXZQoRz9VxrRQudqCR0At/J++7eXeZYwHZl9yYW5nZZRdlChHQUhneBtAcABHQUizcKANcABljAJkY5RLD3Uu
